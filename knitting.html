---
layout: clean
title: Strickhilfe
permalink: /strickhilfe/
---

<div id="knitting" class="container">
    <div id="drawboard-wrapper">
        <div id="drawboard"></div>
    </div>
    <div id="knitting-settings">
        <div class="panel panel-primary">
            <div class="panel-heading">Maße</div>
            <div class="panel-body">
                <form>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><b>Höhe</b></span>
                            <input id="height" type="number" class="form-control input-change" placeholder="Höhe" min="1" step="0.5" value="50" aria-describedby="height-addon">
                            <span class="input-group-addon" id="height-addon">cm</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><b>Breite</b></span>
                            <input id="width" type="number" class="form-control input-change" placeholder="Breite" min="1" step="0.5" value="40" aria-describedby="width-addon">
                            <span class="input-group-addon" id="width-addon">cm</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><b>a</b></span>
                            <input id="side-a" type="number" class="form-control input-change" placeholder="a" min="1" step="0.5" value="9" aria-describedby="side-a-addon">
                            <span class="input-group-addon" id="side-a-addon">cm</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><b>b</b></span>
                            <input id="side-b" type="number" class="form-control input-change" placeholder="b" min="1" step="0.5" value="10" aria-describedby="side-b-addon">
                            <span class="input-group-addon" id="side-b-addon">cm</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">Umfang</div>
            <div class="panel-body">
                <p id="perimeter"></p>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="{{ '/bower_components/raphael/raphael-min.js' | prepend: site.baseurl }}"></script>
<script>
    var realWidth = 1000;
    var realHeight = 1000;
    var paper = new Raphael('drawboard');
    var svg = paper.canvas;

    svg.setAttribute('viewBox', '0 0 ' + realWidth + ' ' + realHeight);
    svg.removeAttribute('width');
    svg.removeAttribute('height');

    function drawA(width, height, a, b) {
        paper.clear();

        var ratio = realWidth/Math.max(width, height);
        var alpha = Math.atan(2*height/width);
        // big shape
        var d = `M ${realWidth/2-(width/2*ratio)},${realHeight/2+(height/2*ratio)}`;
        d += ` L ${realWidth/2-(width/2*ratio)+a*ratio},${realHeight/2+(height/2*ratio)}`;
        d += ` L ${realWidth/2-(width/2*ratio)+a*ratio+b*ratio*Math.cos(alpha)},${realHeight/2+(height/2*ratio)-b*ratio*Math.sin(alpha)}`;
        d += ` L ${realWidth/2+(width/2*ratio)-a*ratio-b*ratio*Math.cos(alpha)},${realHeight/2+(height/2*ratio)-b*ratio*Math.sin(alpha)}`;
        d += ` L ${realWidth/2+(width/2*ratio)-a*ratio},${realHeight/2+(height/2*ratio)}`;
        d += ` L ${realWidth/2+(width/2*ratio)},${realHeight/2+(height/2*ratio)}`;
        d += ` L ${realWidth/2},${realHeight/2-(height/2*ratio)}`;
        d += `z`;

        // small hole
        d += `M ${realWidth/2},${realHeight/2-(height/2*ratio)+a*ratio*Math.tan(alpha)}`
        d +=` L ${realWidth/2+(width/2*ratio)-a*ratio-((b*Math.sin(alpha)+a*Math.sin(alpha))/Math.tan(alpha)*ratio)},${realHeight/2+(height/2*ratio)-b*ratio*Math.sin(alpha)-a*ratio*Math.sin(alpha)}`;
        d += ` L ${realWidth/2-(width/2*ratio)+a*ratio+((b*Math.sin(alpha)+a*Math.sin(alpha))/Math.tan(alpha)*ratio)},${realHeight/2+(height/2*ratio)-b*ratio*Math.sin(alpha)-a*ratio*Math.sin(alpha)}`;
        d += `z`;
        p = paper.path(d);
        p.node.id = 'raphael-letter';
        p.attr({
            'stroke': 0
        });

        var t = paper.text(realWidth/2-(width/2*ratio)+a*ratio/2, realHeight/2+(height/2*ratio)-30, "a").attr({
            'font-size': 50
        });
        t.node.id = 'raphael-text-light';
        t = paper.text(realWidth/2+(width/2*ratio)-a*ratio-b*ratio*Math.cos(alpha)/2+30, realHeight/2+(height/2*ratio)-b*ratio*Math.sin(alpha)/2, "b").attr({
            'font-size': 50
        });
        t.node.id = 'raphael-text-light';
    }

    function calculatePerimeter(width, height, a, b) {
        var alpha = Math.atan(2*height/width);
        var c = Math.sqrt(height*height + width*width);
        var d = width-2*(a+Math.cos(alpha)*b)
        var f = width-2*(a+(b*Math.sin(alpha)+a*Math.sin(alpha))/Math.tan(alpha))
        var e = Math.sqrt(Math.pow(height-b*Math.sin(alpha)-a*Math.sin(alpha)-a*Math.tan(alpha), 2) + Math.pow(f/2, 2));
        var perimeter1 = (2*(a+b+c)+d).toFixed(1);
        var perimeter2 = (2*e+f).toFixed(1);
        document.getElementById('perimeter').innerHTML = `Umfang 1: ${perimeter1}cm<br/>Umfang 2: ${perimeter2}cm`;
    }

    function recalculate() {
        var height = parseFloat(document.getElementById('height').value);
        var width = parseFloat(document.getElementById('width').value);
        var a = parseFloat(document.getElementById('side-a').value);
        var b = parseFloat(document.getElementById('side-b').value);
        drawA(width, height, a, b);
        calculatePerimeter(width, height, a, b);
    }

    function resizeDrawboard() {
        var wrapper = document.getElementById('drawboard-wrapper');
        var drawboard = document.getElementById('drawboard');
        var width = wrapper.getBoundingClientRect().width;
        var height = wrapper.getBoundingClientRect().height - 16;
        var widthToSet = Math.min(width, height);
        drawboard.style.width = widthToSet + 'px';
    }

    window.onresize = function(event) {
        resizeDrawboard();
    };
    resizeDrawboard();

    var elements = document.getElementsByClassName("input-change")
    Array.prototype.forEach.call(elements, function(el, idx, arr) {
        el.addEventListener("change", recalculate, false);
    });
    recalculate();
</script>
